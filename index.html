<!doctype html>
<html>

<head>
    <title>Wireless Screen</title>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.js"></script>
</head>
<style>
    * {
        padding: 5;
        margin: 5;
    }

    .socket_status {
        float: right;
    }

    .not_connected {
        color: red;
    }

    .connected {
        color: green;
    }
</style>

<body>
    <div id="socket_status" class="socket_status not_connected">&#x25C9;</div>
    <h2 id="page_title"></h2>
    <div id="message"></div>

    <script>
        $(document).ready(function() {
            var ws = new WebSocket("ws://{{ host }}:{{ port }}/socket");

            ws.onopen = function(evt) {
                //$("#connection_status").html("Status: Connected!")
                $("#socket_status").removeClass('not_connected').addClass('connected')
            };

            ws.onmessage = function(evt) {
                msg = JSON.parse(evt.data);
                $('#' + msg['id']).html(msg['message'])
            };

            ws.onclose = function(evt) {
                //$("#connection_status").html("Status: Disconnected!")
                $("#socket_status").removeClass('connected').addClass('not_connected')
            };
        });
    </script>
</body>

</html>
